---
# Test configuration for panasonic_heatpump component
# This file validates all component features and configurations

substitutions:
  device_name: test-panasonic-heatpump
  pin_rx_hp: GPIO16
  pin_tx_hp: GPIO17
  pin_tx_wm: GPIO18
  pin_rx_wm: GPIO19

esp32:
  board: esp32dev
  framework:
    type: esp-idf

esphome:
  name: ${device_name}
  friendly_name: "Test Panasonic Heatpump"

logger:
  level: DEBUG

# No WiFi/API needed for build tests
# wifi:
#   ssid: "test"
#   password: "test12345678"

# api:

external_components:
  - source:
      type: local
      path: ../../components
    components: [panasonic_heatpump]

uart:
  - id: uart_heatpump
    tx_pin: $pin_rx_hp
    rx_pin: $pin_tx_hp
    baud_rate: 9600
    data_bits: 8
    parity: EVEN
    stop_bits: 1
  - id: uart_cz_taw1
    tx_pin: $pin_rx_wm
    rx_pin: $pin_tx_wm
    baud_rate: 9600
    data_bits: 8
    parity: EVEN
    stop_bits: 1

# Test basic configuration
panasonic_heatpump:
  id: my_heatpump
  uart_id: uart_heatpump
  uart_client_id: uart_cz_taw1
  log_uart_msg: true
  update_interval: 3s

# Test all sensor types
sensor:
  - platform: panasonic_heatpump
    top1:
      name: "Test Pump Flow"
      id: test_pump_flow
    top5:
      name: "Test Main Inlet Temp"
    top6:
      name: "Test Main Outlet Temp"
    top7:
      name: "Test Main Target Temp"
    top8:
      name: "Test Compressor Freq"
    top9:
      name: "Test DHW Target Temp"
    top10:
      name: "Test DHW Temp"
    top11:
      name: "Test Operations Hours"
    top12:
      name: "Test Operations Counter"
    top14:
      name: "Test Outside Temp"
    top15:
      name: "Test Heat Power Production"
    top16:
      name: "Test Heat Power Consumption"
    top21:
      name: "Test Outside Pipe Temp"
    top22:
      name: "Test DHW Heat Delta"
    top23:
      name: "Test Heat Delta"
    top24:
      name: "Test Cool Delta"
    top25:
      name: "Test DHW Holiday Shift Temp"
    top27:
      name: "Test Z1 Heat Request Temp"
    top28:
      name: "Test Z1 Cool Request Temp"
    top29:
      name: "Test Z1 Heat Curve Target High Temp"
    top30:
      name: "Test Z1 Heat Curve Target Low Temp"
    top31:
      name: "Test Z1 Heat Curve Outside High Temp"
    top32:
      name: "Test Z1 Heat Curve Outside Low Temp"
    top33:
      name: "Test Room Thermostat Temp"
    top34:
      name: "Test Z2 Heat Request Temp"
    top35:
      name: "Test Z2 Cool Request Temp"
    top36:
      name: "Test Z1 Water Temp"
    top37:
      name: "Test Z2 Water Temp"
    top38:
      name: "Test Cool Power Production"
    top39:
      name: "Test Cool Power Consumption"
    top40:
      name: "Test DHW Power Production"
    top41:
      name: "Test DHW Power Consumption"
    top42:
      name: "Test Z1 Water Target Temp"
    top43:
      name: "Test Z2 Water Target Temp"
    top45:
      name: "Test Room Holiday Shift Temp"
    top46:
      name: "Test Buffer Temp"

# Test all binary sensors
binary_sensor:
  - platform: panasonic_heatpump
    top0:
      name: "Test Heatpump State"
    top2:
      name: "Test Force DHW State"
    top3:
      name: "Test Quiet Mode Schedule"
    top13:
      name: "Test Main Schedule State"
    top26:
      name: "Test Defrosting State"
    top60:
      name: "Test Internal Heater State"
    top61:
      name: "Test External Heater State"
    top68:
      name: "Test Force Heater State"
    top69:
      name: "Test Sterilization State"
    top99:
      name: "Test Buffer Installed"
    top100:
      name: "Test DHW Installed"
    top108:
      name: "Test Alt External Sensor"
    top109:
      name: "Test Anti Freeze Mode"
    top110:
      name: "Test Optional PCB"
    top119:
      name: "Test External Control"
    top120:
      name: "Test External Heat Cool Control"
    top121:
      name: "Test External Error Signal"
    top122:
      name: "Test External Compressor Control"
    top123:
      name: "Test Z2 Pump State"
    top124:
      name: "Test Z1 Pump State"
    top129:
      name: "Test Bivalent Control"
    top132:
      name: "Test Bivalent Advanced Heat"
    top133:
      name: "Test Bivalent Advanced DHW"

# Test all text sensors
text_sensor:
  - platform: panasonic_heatpump
    top4:
      name: "Test Operation Mode"
    top17:
      name: "Test Powerful Mode Time"
    top18:
      name: "Test Quiet Mode Level"
    top19:
      name: "Test Holiday Mode State"
    top20:
      name: "Test ThreeWay Valve State"
    top44:
      name: "Test Error"
    top58:
      name: "Test DHW Heater State"
    top59:
      name: "Test Room Heater State"
    top76:
      name: "Test Heating Mode"
    top81:
      name: "Test Cooling Mode"
    top92:
      name: "Test Heat Pump Model"
    top94:
      name: "Test Zones State"
    top101:
      name: "Test Solar Mode"
    top106:
      name: "Test Pump Flowrate Mode"
    top107:
      name: "Test Liquid Type"
    top111:
      name: "Test Z1 Sensor Settings"
    top112:
      name: "Test Z2 Sensor Settings"
    top114:
      name: "Test External Pad Heater"
    top125:
      name: "Test TwoWay Valve State"
    top126:
      name: "Test ThreeWay Valve State2"
    top130:
      name: "Test Bivalent Mode"

# Test all number controls
number:
  - platform: panasonic_heatpump
    set5:
      name: "Test Set Z1 Heat Request Temperature"
      min_value: -5.0
      max_value: 5.0
      step: 1.0
    set6:
      name: "Test Set Z1 Cool Request Temperature"
      min_value: -5.0
      max_value: 5.0
      step: 1.0
    set7:
      name: "Test Set Z2 Heat Request Temperature"
      min_value: -5.0
      max_value: 5.0
      step: 1.0
    set8:
      name: "Test Set Z2 Cool Request Temperature"
      min_value: -5.0
      max_value: 5.0
      step: 1.0
    set11:
      name: "Test Set DHW Temp"
      min_value: 40.0
      max_value: 65.0
      step: 1.0

# Test all select controls
select:
  - platform: panasonic_heatpump
    set2:
      name: "Test Set Holiday Mode"
    set3:
      name: "Test Set Quiet Mode"
    set4:
      name: "Test Set Powerful Mode"
    set9:
      name: "Test Set Operation Mode"
    set17:
      name: "Test Set Zones"
    set26:
      name: "Test Set External PadHeater"
    set35:
      name: "Test Set Bivalent Mode"

# Test all switch controls
switch:
  - platform: panasonic_heatpump
    set1:
      name: "Test Set Heatpump"

# Test climate platform
climate:
  - platform: panasonic_heatpump
    name: "Test Heatpump Climate"
    supports_cool: true
    supports_heat: true
